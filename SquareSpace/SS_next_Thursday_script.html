<!--* This script changes the date to next delivery date -->

<script>
	// The selector could be tricky because it only works if there's only one image-title on the page
	// The other way is to select the id for, but SquareSpace changes the id all the time, just double check before deployment.
	const dateString = document.querySelector(
		".sqs-block-image .image-block-outer-wrapper.image-block-v2 .image-title *"
	);
	// The following line changes the content of image title
	dateString.innerHtml =
		"Slanted Door at Home offerings for <span id='next-thursday'>I am a span!</span>";
	const targetDayOfWeek = 4; //Thursday => 0 === Sunday, 6 === Saturday
	const today = new Date();
	const currentDayOfWeek = today.getDay();
	let dateArray;
	// for Wed and Thur
	if (currentDayOfWeek === 3 || currentDayOfWeek === 4) {
		today.setDate(
			today.getDate() + 7 + ((targetDayOfWeek + 7 - today.getDay()) % 7)
		);
		dateArray = today.toString().split(" ").slice(1, 3);
	} else {
		// rest of the week
		today.setDate(
			today.getDate() + ((targetDayOfWeek + 7 - today.getDay()) % 7)
		);
		dateArray = today.toString().split(" ").slice(1, 4);
	}
	// select the span inside of image title.
	// We added this tag on line 10-11
	const dateText = document.querySelector("#next-thursday");
	// change the text of span to the date of next Thursday
	dateText.textContent = dateArray.join(" ");
</script>
