<script>
  if (isLocal !== "true") {
    const all_products = document.querySelectorAll(".MENU-link");
    for (product_link of all_products) {
      product_link.addEventListener("click", (event) => {
        // bypass default behavior and capture the url
        event.preventDefault();
        const url = event.srcElement.href;
        // console.log(url);
        //* this line redirects to the target url
        // window.location.href = url;

        // check to see if zip code is in the service area
        const zipCodeArr = [
          94102, 94103, 94104, 94105, 94107, 94108, 94109, 94110, 94111, 94112,
          94114, 94115, 94116, 94117, 94118, 94121, 94122, 94123, 94124, 94127,
          94129, 94131, 94132, 94133, 94134, 94158,
        ];
        const zipCodeForm = document.querySelector(
          ".zip-code-checker__container"
        );
        zipCodeForm.classList.toggle("zip-code__container-hidden");
        zipCodeForm.classList.toggle("zip-code__container-shown");
        zipCodeForm.addEventListener("submit", (event) => {
          event.preventDefault();
          const zipCodeInput = parseInt(
            document.querySelector("#zip-code__input").value
          );
          const requestText = document.querySelector(
            ".zip-code-input__request-text"
          );
          const invalidText = document.querySelector(".zip-code__invalid-text");
          const validText = document.querySelector(".zip-code__valid-text");
          let currentCountDown = 3;
          countDownText.innerHTML = currentCountDown;

          const countInterval = setInterval(() => {
            currentCountDown--;
            countDownText.innerHTML = currentCountDown;
          }, 1000);

          if (zipCodeArr.includes(zipCodeInput)) {
            hideText(requestText, invalidText);
            showText(validText);
            setTimeout(() => {
              window.location.href = url;
            }, 3000);
            window.sessionStorage.setItem("isLocal", true);
          } else {
            hideText(requestText, validText);
            showText(invalidText);
            setTimeout(() => {
              zipCodeForm.classList.toggle("zip-code__container-hidden");
              zipCodeForm.classList.toggle("zip-code__container-shown");
            }, 3000);
          }
        });

        // toggle zip code checker by clicking on close icon
      });
    }
  }
</script>
